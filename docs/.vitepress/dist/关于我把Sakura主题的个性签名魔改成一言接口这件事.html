<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于我把Sakura主题的个性签名魔改成一言接口这件事 | hua's Blog</title>
    <meta name="description" content="一个个人blog">
    <link rel="preload stylesheet" href="/assets/style.77c8303d.css" as="style">
    
    <script type="module" src="/assets/app.8756c653.js"></script>
    <link rel="modulepreload" href="/assets/chunks/framework.bcb722b3.js">
    <link rel="modulepreload" href="/assets/chunks/plugin-vue_export-helper.2570af57.js">
    <link rel="modulepreload" href="/assets/chunks/responsive-observe.44d63d91.js">
    <link rel="modulepreload" href="/assets/关于我把Sakura主题的个性签名魔改成一言接口这件事.md.54bc443f.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><section class="arco-layout" data-v-7bc4f8f1><!--[--><header class="arco-layout-header"><!--[--><!--[--><div class="header" data-v-7bc4f8f1><div class="nav" data-v-7bc4f8f1 data-v-e370bf0c><a href="/" class="logo" data-v-e370bf0c><i class="bi bi-code" data-v-e370bf0c></i><span class="logo_name" data-v-e370bf0c>Hua</span></a><ul class="nav_item" data-v-e370bf0c><li data-v-e370bf0c><a href="/" data-v-e370bf0c><i class="bi bi-house" data-v-e370bf0c></i><span data-v-e370bf0c>首页</span></a></li><li data-v-e370bf0c><a href="/about" data-v-e370bf0c><i class="bi bi-person" data-v-e370bf0c></i><span data-v-e370bf0c>关于</span></a></li></ul><span class="switchDark" data-v-e370bf0c><i class="bi bi-brightness-high" data-v-e370bf0c></i><button type="button" role="switch" aria-checked="false" class="arco-switch arco-switch-type-circle" style="" data-v-e370bf0c><span class="arco-switch-handle"><span class="arco-switch-handle-icon"><!--[--><!--[--><!--]--><!--]--></span></span><!--  prettier-ignore  --><!--v-if--></button></span></div></div><!--]--><!--]--></header><main class="arco-layout-content"><!--[--><!--[--><div class="content" data-v-7bc4f8f1><div data-v-7bc4f8f1><div style="position:relative;" class="postContent" data-v-7bc4f8f1><div><div role="alert" class="arco-alert arco-alert-info"><div class="arco-alert-icon"><!--[--><svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="currentColor" class="arco-icon arco-icon-info-circle-fill" style="" stroke-width="4" stroke-linecap="butt" stroke-linejoin="miter"><path fill-rule="evenodd" clip-rule="evenodd" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z" fill="currentColor" stroke="none"></path></svg><!--]--></div><div class="arco-alert-body"><!--v-if--><div class="arco-alert-content"><!--[-->这篇是以前用halo CMS的时候写的，只适用于halo<!--]--></div></div><!--v-if--><!--v-if--></div><h1 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to &quot;前言&quot;">​</a></h1><p>开始，Sakura主题的个性签名是这样的： <img src="https://s2.loli.net/2023/10/17/TSugxjDkBMwPKpN.png" alt="Sakura_old-9f4a5eef48124865acaef6c8ce6c7642.png"></p><p><img src="https://s2.loli.net/2023/10/17/M24phAJfZo6EOS5.png" alt="Sakura_old2.png"></p><p>也就是说这个东西是和后台关联的，后台的个性签名是什么，前台就是什么。这时，我就想，定死多没意思，如果能刷新一次页面变一下多好。</p><h1 id="定位位置" tabindex="-1">定位位置 <a class="header-anchor" href="#定位位置" aria-label="Permalink to &quot;定位位置&quot;">​</a></h1><p>我们在网页审查元素定位倒这个元素的位置：</p><p><img src="https://s2.loli.net/2023/10/17/3XGrEaUjDJO5mxP.png" alt="Sakura_modify2.png"></p><p>在Sakura源码中定位到类似的代码片段：</p><p><img src="https://s2.loli.net/2023/10/17/GXt6dfUFPhzmHAD.png" alt="Sakura_modify.png"></p><h1 id="改成一言api" tabindex="-1">改成一言API <a class="header-anchor" href="#改成一言api" aria-label="Permalink to &quot;改成一言API&quot;">​</a></h1><p>找到<a href="https://hitokoto.cn/" target="_blank" rel="noreferrer">一言接口官网</a>：</p><p>官网给了一个使用实例：</p><p><img src="https://s2.loli.net/2023/10/17/GqoZkjnYwur4PQT.png" alt="hitokoto2.png"></p><p>我们就采用第一个ES6的写法，先将定位的：那一行中的模板<code>${user.description}</code>替换成自己的标签:</p><div class="language-HTML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;hitokoto&quot;</span><span style="color:#E1E4E8;">&gt;&lt;</span><span style="color:#85E89D;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">href</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;#&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;hitokoto_text&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">target</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;_blank&quot;</span><span style="color:#E1E4E8;">&gt;:D 获取中...&lt;/</span><span style="color:#85E89D;">a</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">span</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">span</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;hitokoto&quot;</span><span style="color:#24292E;">&gt;&lt;</span><span style="color:#22863A;">a</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">href</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;#&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;hitokoto_text&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">target</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;_blank&quot;</span><span style="color:#24292E;">&gt;:D 获取中...&lt;/</span><span style="color:#22863A;">a</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">span</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p>在定位的文件<code>imgbox.ftl</code>底部补上Script：</p><div class="language-HTML vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">fetch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;https://v1.hitokoto.cn&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> response.</span><span style="color:#B392F0;">json</span><span style="color:#E1E4E8;">())</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">hitokoto</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;hitokoto_text&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      hitokoto.href </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;https://hitokoto.cn/?uuid=&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> data.uuid</span></span>
<span class="line"><span style="color:#E1E4E8;">      hitokoto.innerText </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data.hitokoto</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">catch</span><span style="color:#E1E4E8;">(console.error)</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">fetch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;https://v1.hitokoto.cn&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">response</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> response.</span><span style="color:#6F42C1;">json</span><span style="color:#24292E;">())</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">(</span><span style="color:#E36209;">data</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">hitokoto</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;hitokoto_text&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">      hitokoto.href </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;https://hitokoto.cn/?uuid=&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> data.uuid</span></span>
<span class="line"><span style="color:#24292E;">      hitokoto.innerText </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> data.hitokoto</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">catch</span><span style="color:#24292E;">(console.error)</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p>就此，大功告成了！</p></div></div><!----></div></div><!--]--><!--]--></main><footer class="arco-layout-footer"><!--[--><!--[--><div class="footer" data-v-7bc4f8f1>Powered by Hua © 2023</div><!--]--><!--]--></footer><!--]--></section></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"更新日志.md\":\"9a944d42\",\"index.md\":\"2c3e94e8\",\"小小的更新了一个回到顶部和切换夜间模式的工具条.md\":\"749fa4d7\",\"我又双叒叕换新站点了.md\":\"9f56ecce\",\"开源许可证的选择.md\":\"2d5210af\",\"about.md\":\"06e44b2d\",\"关于我把sakura主题的个性签名魔改成一言接口这件事.md\":\"54bc443f\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"hua's Blog\",\"description\":\"一个个人blog\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>